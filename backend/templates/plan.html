{% extends "base.html" %}

{% block content %}
<div class="container py-16 bg-[#f4f1ea]">
  <div class="max-w-4xl mx-auto bg-white p-12 shadow-sm border border-gray-100 fade-in-up">

    <h2 class="text-center font-serif text-4xl mb-2 text-[color:var(--color-black)]">
      תכנון האירוע שלך
    </h2>
    <p class="text-center text-gray-400 mb-12 text-lg font-sans">
      ספר לנו על החזון שלך, ואנחנו נדאג לשאר
    </p>

    <form id="planForm" action="/create_event" method="POST" class="space-y-12">

      <input type="hidden" name="preview" value="true">

      <!-- EVENT TYPE -->
      <div class="border-b border-gray-100 pb-12">
        <h3 class="text-2xl mb-8 font-serif">סוג האירוע</h3>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">

          {% for val, label, icon in [
            ('wedding','חתונה','💍'),
            ('bar-mitzvah','בר/בת מצווה','✡️'),
            ('brit','ברית/ה','👶'),
            ('engagement','אירוסין/חינה','💑'),
            ('party','מסיבה פרטית','🥂'),
            ('business','אירוע עסקי','💼'),
            ('birthday','יום הולדת','🎂'),
            ('other','אחר','✨')
          ] %}
          <label class="cursor-pointer">
            <input type="radio" name="event_type" value="{{ val }}" class="peer hidden">
            <div class="filter-card peer-checked">
              <span class="block text-3xl mb-2">{{ icon }}</span>
              <span class="font-bold text-sm uppercase tracking-wider">{{ label }}</span>
            </div>
          </label>
          {% endfor %}

        </div>
      </div>

      <!-- DATE -->
      <div class="border-b border-gray-100 pb-12">
        <h3 class="text-2xl mb-8 font-serif">מועד האירוע</h3>
        <div class="grid md:grid-cols-2 gap-8">
          <input type="date" name="date" class="input">
          <div class="grid grid-cols-3 gap-4">
            {% for v,l in [('morning','בוקר'),('noon','צהריים'),('evening','ערב')] %}
            <label>
              <input type="radio" name="time_of_day" value="{{ v }}" class="peer hidden">
              <div class="filter-card peer-checked">{{ l }}</div>
            </label>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- LOCATION -->
      <div class="border-b border-gray-100 pb-12">
        <h3 class="text-2xl mb-8 font-serif">אווירה ומיקום</h3>

        <select name="venue_type" class="input">
          <option disabled selected>סוג מתחם</option>
          <option value="hall">אולם</option>
          <option value="garden">גן</option>
          <option value="hotel">מלון</option>
          <option value="nature">טבע</option>
        </select>

        <select name="style" class="input mt-4">
          <option disabled selected>סגנון</option>
          <option value="Luxury">יוקרתי</option>
          <option value="Boho">בוהו</option>
          <option value="Modern">מודרני</option>
        </select>

        <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mt-6">
          {% for r,l in [('north','צפון'),('center','מרכז'),('south','דרום'),('jerusalem','ירושלים'),('sharon','השרון')] %}
          <label>
            <input type="checkbox" name="region" value="{{ r }}" class="peer hidden">
            <div class="filter-card peer-checked">{{ l }}</div>
          </label>
          {% endfor %}
        </div>
      </div>

      <!-- BUDGET -->
      <div class="border-b border-gray-100 pb-12">
        <h3 class="text-2xl mb-8 font-serif">פרטים טכניים</h3>
        <select name="budget" class="input">
          <option disabled selected>תקציב</option>
          <option value="low">עד 50K</option>
          <option value="medium">50–100K</option>
          <option value="high">100–200K</option>
        </select>

        <input type="number" name="guests" placeholder="מספר אורחים" class="input mt-4">
      </div>

      <!-- SUBMIT -->
      <div class="flex gap-4 pt-8">
        <button id="submitBtn" type="submit" class="btn-primary w-full">
          הצג תוצאות מותאמות אישית
        </button>
      </div>

    </form>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("planForm");
  const btn = document.getElementById("submitBtn");

  form.addEventListener("submit", e => {
    e.preventDefault();
    form.classList.add("form-loading");
    btn.innerText = "מחפשים אולמות מושלמים עבורך… ⏳";
    setTimeout(() => form.submit(), 700);
  });
});
</script>

{% endblock %}
